-- ============================================================================
-- CREATE VIEWS - Combine raw data with calculated fields
-- ============================================================================
-- Generated by rulebook-to-postgres tool
-- Total Views: 3
-- ============================================================================

-- systems View
-- Includes all base table columns (raw + FK) for updatable view support
CREATE OR REPLACE VIEW vw_systems AS
SELECT
  t.system_id,
  t.display_name,
  t.class,
  t.base_scale,
  t.scale_factor,
  t.measure_name,
  t.fractal_dimension,
  t.theoretical_log_log_slope
FROM systems t;

-- scales View
-- Includes all base table columns (raw + FK) for updatable view support
CREATE OR REPLACE VIEW vw_scales AS
SELECT
  t.system_id,
  t.iteration,
  t.measure,
  calc_scales_base_scale(t.system_id) AS base_scale,
  calc_scales_scale_factor(t.system_id) AS scale_factor,
  calc_scales_scale(t.system_id) AS scale,
  calc_scales_log_scale(t.system_id) AS log_scale,
  calc_scales_log_measure(t.system_id) AS log_measure
FROM scales t;

-- system_stats View
-- Includes all base table columns (raw + FK) for updatable view support
CREATE OR REPLACE VIEW vw_system_stats AS
SELECT
  t.system_id,
  calc_system_stats_theoretical_log_log_slope(t.system_id) AS theoretical_log_log_slope,
  calc_system_stats_point_count(t.system_id) AS point_count,
  calc_system_stats_min_log_scale(t.system_id) AS min_log_scale,
  calc_system_stats_max_log_scale(t.system_id) AS max_log_scale,
  calc_system_stats_min_log_measure(t.system_id) AS min_log_measure,
  calc_system_stats_max_log_measure(t.system_id) AS max_log_measure,
  calc_system_stats_empirical_log_log_slope(t.system_id) AS empirical_log_log_slope
FROM system_stats t;

